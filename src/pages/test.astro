---
const site = 'https://mindyourdecisions.com/blog/wp-json/wp/v2/posts';
const res = await fetch(site);
const posts = await res.json();
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>New page to test routing</title>
	</head>
	<script>
		// fix images they are set to data-src with the src attribute set to some hash of the image
		document.addEventListener("DOMContentLoaded", function () {
		    const lazyImages = document.querySelectorAll("img[data-src]");
		    const observer = new IntersectionObserver((entries, observer) => {
		        entries.forEach(entry => {
		            if (entry.isIntersecting) {
		                const img = entry.target;
		                img.src = img.dataset.src;
		                img.removeAttribute("data-src");
		                observer.unobserve(img);
		            }
		        });
		    });
		    lazyImages.forEach(img => observer.observe(img));
		});
	</script>
	<body>
		<h1>Maw!! ðŸš€</h1>
		{
		  posts.map((post) => (
		      <h2 set:html={post.title.rendered} />
		      <p set:html={post.content.rendered} />
		  ))
		}
	</body>
</html>
